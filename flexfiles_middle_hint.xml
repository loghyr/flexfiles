<!-- Copyright (C) The IETF Trust (2014) -->
<!-- Copyright (C) The Internet Society (2014) -->

<section title="Flexible Files Creation Layout Hint">
  <t>
    The layouthint4 type is defined in the
    <xref target="RFC5661" /> as follows:
  </t>

  <figure>
    <artwork>
struct layouthint4 {
    layouttype4           loh_type;
    opaque                loh_body&lt;&gt;;
};
    </artwork>
  </figure>

  <t>
    The layouthint4 structure is used by the client to pass a hint
    about the type of layout it would like created for a particular
    file.  If the loh_type layout type is LAYOUT4_FLEX_FILES, then
    the loh_body opaque value is defined by the pnfs_ff_layouthint
    type.
  </t>

  <section anchor="pnfs_ff_layouthint" title="pnfs_ff_layouthint">
    <figure>
      <artwork>
/// union pnfs_ff_max_comps_hint switch (bool pfmx_valid) {
///     case TRUE:
///         uint32_t            omx_max_comps;
///     case FALSE:
///         void;
/// };
///
/// union pnfs_ff_stripe_unit_hint switch (bool pfsu_valid) {
///     case TRUE:
///         length4             osu_stripe_unit;
///     case FALSE:
///         void;
/// };
///
/// union pnfs_ff_mirror_cnt_hint switch (bool pfmc_valid) {
///     case TRUE:
///         uint32_t            omc_mirror_cnt;
///     case FALSE:
///         void;
/// };
///
/// union pnfs_ff_striping_pattern_hint switch (bool pfsp_valid) {
///     case TRUE:
///         pnfs_ff_striping_pattern    pfsp_striping_pattern;
///     case FALSE:
///         void;
/// };
///
/// struct pnfs_ff_layouthint {
///     pnfs_ff_max_comps_hint         pflh_max_comps_hint;
///     pnfs_ff_stripe_unit_hint       pflh_stripe_unit_hint;
///     pnfs_ff_mirror_cnt_hint        pflh_mirror_cnt_hint;
///     pnfs_ff_striping_pattern_hint  pflh_striping_pattern_hint;
/// };
///
      </artwork>
    </figure>

    <t>
      This type conveys hints for the desired data map.  All parameters
      are optional so the client can give values for only the parameters
      it cares about, e.g. it can provide a hint for the desired number
      of mirrored components, regardless of the striping pattern selected
      for the file.  The server should make an attempt to honor the hints,
      but it can ignore any or all of them at its own discretion and
      without failing the respective CREATE operation.
    </t>
  </section>
</section>
